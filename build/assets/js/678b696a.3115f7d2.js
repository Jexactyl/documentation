"use strict";(self.webpackChunkjexactyl_documentation=self.webpackChunkjexactyl_documentation||[]).push([[742],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return m}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),u=c(n),m=r,g=u["".concat(s,".").concat(m)]||u[m]||p[m]||o;return n?a.createElement(g,i(i({ref:t},d),{},{components:n})):a.createElement(g,i({ref:t},d))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var c=2;c<o;c++)i[c]=n[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},2151:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return c},toc:function(){return d},default:function(){return u}});var a=n(7462),r=n(3366),o=(n(7294),n(3905)),i=["components"],l={sidebar_position:1},s="Migrating to Jexactyl",c={unversionedId:"migrating/panel/migrating",id:"migrating/panel/migrating",title:"Migrating to Jexactyl",description:"*",source:"@site/docs/migrating/panel/migrating.md",sourceDirName:"migrating/panel",slug:"/migrating/panel/migrating",permalink:"/docs/migrating/panel/migrating",editUrl:"https://github.com/jexactyl/documentation/edit/main/docs/migrating/panel/migrating.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Building Jexactyl",permalink:"/docs/panel/modify/building"},next:{title:"Automatic update",permalink:"/docs/upgrading/automatic_upgrade"}},d=[{value:"Fetch updated files",id:"fetch-updated-files",children:[],level:2},{value:"Add .env file to directory",id:"add-env-file-to-directory",children:[],level:2},{value:"Update dependencies",id:"update-dependencies",children:[],level:2},{value:"Clear compiled cache",id:"clear-compiled-cache",children:[],level:2},{value:"Update database eggs",id:"update-database-eggs",children:[],level:2},{value:"Set Webserver Permissions",id:"set-webserver-permissions",children:[],level:2},{value:"Restart queue worker",id:"restart-queue-worker",children:[],level:2},{value:"Exit maintainence mode",id:"exit-maintainence-mode",children:[],level:2}],p={toc:d};function u(e){var t=e.components,n=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"migrating-to-jexactyl"},"Migrating to Jexactyl"),(0,o.kt)("hr",null),(0,o.kt)("p",null,"This guide covers the process of migrating from a Pterodactyl panel to Jexactyl.\nThe process of migrating is nice and simple, only requiring you to download new\nfiles and copy your important data over."),(0,o.kt)("h2",{id:"fetch-updated-files"},"Fetch updated files"),(0,o.kt)("p",null,"You'll want to put your Panel into maintenance mode by running the down command below before starting. This will prevent users from accessing the Panel during a period where things will be broken or not working correctly. Make sure that you're in the /var/www/pterodactyl directory when executing the command."),(0,o.kt)("div",{className:"admonition admonition-danger alert alert--danger"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"Check the directory!")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Please make sure you're in the ",(0,o.kt)("inlineCode",{parentName:"p"},"/var/www/pterodactyl")," directory before running ANY of these commands."))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"# Put the Panel into maintenance mode and deny user access\nphp artisan down\n")),(0,o.kt)("p",null,"Let's then make sure your settings are safe\nby backing up your ",(0,o.kt)("inlineCode",{parentName:"p"},".env")," settings file to a safe place while we\nmigrate your Pterodactyl panel over to Jexactyl."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"cp -R /var/www/pterodactyl/.env /root/.env\n")),(0,o.kt)("p",null,"After we've done this, we need to remove the existing files and replace them with Jexactyl's code."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"rm -rf *\ncurl -L -o panel.tar.gz https://github.com/jexactyl/panel/releases/latest/download/panel.tar.gz\n\n# Download the updated files and delete the archive file.\ntar -xzvf panel.tar.gz && rm -f panel.tar.gz\n")),(0,o.kt)("p",null,"Once all of the files are downloaded we need to set the correct permissions\non the cache and storage directories to avoid any webserver related errors."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"chmod -R 755 storage/* bootstrap/cache\n")),(0,o.kt)("h2",{id:"add-env-file-to-directory"},"Add .env file to directory"),(0,o.kt)("p",null,"Now, we need to add our ",(0,o.kt)("inlineCode",{parentName:"p"},".env")," file back to the /var/www/pterodactyl directory."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"mv /root/.env /var/www/pterodactyl/.env\n")),(0,o.kt)("h2",{id:"update-dependencies"},"Update dependencies"),(0,o.kt)("p",null,"After you've downloaded all of the new files you will need to\nupgrade the core components of the panel. To do this, simply\nrun the commands below and follow any prompts."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"composer install --no-dev --optimize-autoloader\n")),(0,o.kt)("h2",{id:"clear-compiled-cache"},"Clear compiled cache"),(0,o.kt)("p",null,"You'll also want to clear the compiled template cache to\nensure that new and modified templates show up correctly for users."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"php artisan optimize:clear\n")),(0,o.kt)("h2",{id:"update-database-eggs"},"Update database eggs"),(0,o.kt)("p",null,"You'll also need to update your database schema for the newest\nversion of Jexactyl. Running the two commands below will update\nthe schema and ensure the default eggs we ship are up to date\n(and add any new ones we might have)."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"php artisan migrate:rollback\nphp artisan migrate --seed --force\n")),(0,o.kt)("h2",{id:"set-webserver-permissions"},"Set Webserver Permissions"),(0,o.kt)("p",null,"The last step is to set the proper owner of the files to be the\nuser that runs your webserver. In most cases this is ",(0,o.kt)("inlineCode",{parentName:"p"},"www-data"),", but\ncan vary from system to system \u2014 sometimes being ",(0,o.kt)("inlineCode",{parentName:"p"},"nginx"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"apache"),", or even ",(0,o.kt)("inlineCode",{parentName:"p"},"nobody"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"# If using NGINX or Apache (not on CentOS):\nchown -R www-data:www-data *\n\n# If using NGINX on CentOS:\nchown -R nginx:nginx *\n\n# If using Apache on CentOS\nchown -R apache:apache *\n")),(0,o.kt)("h2",{id:"restart-queue-worker"},"Restart queue worker"),(0,o.kt)("p",null,"After every update you should restart the queue worker, to\nensure that the new code is loaded in and used."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"php artisan queue:restart\n")),(0,o.kt)("h2",{id:"exit-maintainence-mode"},"Exit maintainence mode"),(0,o.kt)("p",null,"Now that the upgrade is complete, exit maintenance mode and Jexactyl will now be available!"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"# Bring the Panel back up to receive connections.\nphp artisan up\n")))}u.isMDXComponent=!0}}]);